<mat-drawer-container class="h-full flex-auto">
    <!-- Drawer -->
    <!-- <mat-drawer class="w-72 dark:bg-gray-900" [mode]="drawerMode" [opened]="drawerOpened" #commDrawer>
        <communications-sidebar></communications-sidebar>
    </mat-drawer> -->

    <div class="flex w-full flex-col bg-gray-100 dark:bg-gray-900">
        <!-- View mode -->
        @if (!editMode) {
        <!-- Header -->
        <div class="relative">
            <div
                class="text-secondary sticky top-0 z-10 -mt-px border-b border-t text-2xl text-primary bg-accent-200 px-6 py-1 font-medium uppercase dark:bg-gray-900 md:px-8">
                {{ study.number }}
            </div>
            <div class="flex flex-row gap-1 m-2">
                <div class="basis-1/6 h-full w-full items-center text-center rounded-full">
                    <div class="flex h-10 w-10 flex-0 items-center justify-center overflow-hidden rounded-full">
                        <div
                            class="flex h-full w-full items-center justify-center rounded-full bg-gray-200 text-lg uppercase text-gray-600 dark:bg-gray-700 dark:text-gray-200">
                            <img class="h-full w-full object-cover" [src]="study.logo" />
                        </div>
                    </div>
                </div>
                <div class="basis-auto h-full w-full items-center text-left">
                    <div class="ml-4 min-w-0">
                        <div class="truncate font-medium leading-5">
                            {{ study.nick_name }}
                        </div>
                    </div>
                </div>
                <div class="basis-1/6 h-full w-full">
                    <div class="mb-1 ml-auto flex items-center">
                        <button mat-stroked-button (click)="toggleEditMode(true)">
                            <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:pencil-square'"></mat-icon>
                            <span class="ml-2">Edit</span>
                        </button>
                    </div>
                </div>
                <div class="basis-1/6 h-full w-full">
                    <div class="mx-auto flex w-full max-w-3xl items-center justify-end">
                        <a mat-icon-button [matTooltip]="'Close'" [routerLink]="['../']" class="bg-warn-100 ">
                            <mat-icon class="text-primary" [svgIcon]="'heroicons_outline:x-mark'"></mat-icon>
                        </a>
                    </div>
                </div>
            </div>
            <!-- Other Information-->
            <div class="flex flex-row gap-1 m-2">
            </div>

        </div>
        <!-- study -->
        <div class="relative flex flex-auto flex-col items-center p-6 pt-0 sm:p-12 sm:pt-0">
            <div class="w-full max-w-3xl">

            </div>
        </div>
        }

        <!-- Edit mode -->
        @if (editMode) {
        <!-- Header -->
        <div class="relative h-40 w-full bg-accent-100 px-8 dark:bg-accent-700 sm:h-48 sm:px-12">
            <!-- Background -->
            <img class="absolute inset-0 h-full w-full object-cover"
                [src]="'images/cards/davesa-640x480.jpg'" />
            <!-- Close button -->
            <div class="mx-auto flex w-full max-w-3xl items-center justify-end pt-6">
                <a mat-icon-button [matTooltip]="'Close'" (click)="editMode = !editMode") class="bg-warn-100 ">
                    <mat-icon class="text-primary" [svgIcon]="'heroicons_outline:x-mark'"></mat-icon>
                </a>
            </div>
        </div>

        <!-- Study form -->
        <div class="relative flex flex-auto flex-col items-center px-6 sm:px-12">
            <div class="w-full max-w-3xl">
                <form [formGroup]="studyForm">
                    <!-- Avatar -->
                    <!-- <div class="-mt-16 flex flex-auto items-end">
                        <div
                            class="ring-bg-card relative flex h-32 w-32 items-center justify-center overflow-hidden rounded-full ring-4">
                            <div class="absolute inset-0 z-10 bg-black bg-opacity-50"></div>
                            <div class="absolute inset-0 z-20 flex items-center justify-center">
                                <div>
                                    <input id="avatar-file-input"
                                        class="pointer-events-none invisible absolute h-0 w-0 opacity-0" type="file"
                                        [multiple]="false" [accept]="'image/jpeg, image/png'" (change)="
                                            uploadAvatar(avatarFileInput.files)
                                        " #avatarFileInput />
                                    <label
                                        class="flex h-10 w-10 cursor-pointer items-center justify-center rounded-full hover:bg-hover"
                                        for="avatar-file-input" matRipple>
                                        <mat-icon class="text-white" [svgIcon]="
                                                'heroicons_outline:camera'
                                            "></mat-icon>
                                    </label>
                                </div>
                                <div>
                                    <button mat-icon-button (click)="removeAvatar()">
                                        <mat-icon class="text-white" [svgIcon]="
                                                'heroicons_outline:trash'
                                            "></mat-icon>
                                    </button>
                                </div>
                            </div>
                            @if (studyImgSrc) {
                            <img class="h-full w-full object-cover" [src]="studyImgSrc" />
                            }
                            @if (!studyImgSrc) {
                            <div
                                class="flex h-full w-full items-center justify-center overflow-hidden rounded bg-gray-200 text-8xl font-bold uppercase leading-none text-gray-600 dark:bg-gray-700 dark:text-gray-200">
                                <mat-icon [svgIcon]="'davesaicons_solid:study'"
                                    class="icon-size-24 text-primary"></mat-icon>
                            </div>
                            }
                        </div>
                    </div> -->
                    <!-- Study  -->
                    <div class="mt-8">
                        <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
                            <mat-label>Study Number</mat-label>
                            <mat-icon matPrefix class="hidden icon-size-5 sm:flex"
                                [svgIcon]="'heroicons_solid:drive_file_rename_outline'"></mat-icon>
                            <input matInput [formControlName]="'number'" [placeholder]="'Study Number'"
                                [spellcheck]="false" />
                        </mat-form-field>
                    </div>
                    <div class="mt-8">
                        <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
                            <mat-label>Study Nickname</mat-label>
                            <mat-icon matPrefix class="hidden icon-size-5 sm:flex"
                                [svgIcon]="'heroicons_solid:drive_file_rename_outline'"></mat-icon>
                            <input matInput [formControlName]="'nick_name'" [placeholder]="'Study Nickname'"
                                [spellcheck]="false" />
                        </mat-form-field>
                    </div>
                    <div class="mt-8">
                        <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
                            <mat-label>Study Name</mat-label>
                            <mat-icon matPrefix class="hidden icon-size-5 sm:flex"
                                [svgIcon]="'heroicons_solid:drive_file_rename_outline'"></mat-icon>
                            <input matInput [formControlName]="'name'" [placeholder]="'Study Name'"
                                [spellcheck]="false" />
                        </mat-form-field>
                    </div>
                </form>
            </div>
        </div>
        }
    </div>